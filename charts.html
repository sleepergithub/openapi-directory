<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pie Chart Demo</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-colorschemes"></script>
  <style>
    canvas {
    width: 50%;
    height: 50%;
    /* for testing
    background: #CFF000; */
    }
  </style>
</head>
<body>

<h1>APIs.guru charts</h1>

<h2>APIs by provider</h2>

<div class="col2"><canvas class="canvas" id="chart1"></canvas></div>

<script>
async function main() {
  try {
    const res = await fetch('https://api.apis.guru/v2/metrics.json',{json:true});
    const data = await res.json();
    const canvas = document.getElementById('chart1');
    const ctx = canvas.getContext('2d');
    pieData = { labels: Object.keys(data.datasets[0].data), datasets: [ { label: data.datasets[0].title,
      data: Object.values(data.datasets[0].data),
     } ] };
                //backgroundColor: 'rgb(255, 99, 132)',
                //borderColor: 'rgb(255, 99, 132)',
    const chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'pie',

        // The data for our dataset
        data: pieData,
        // Configuration options go here
        options: {
          responsive: false,
          maintainAspectRatio: false,
          plugins: {
            colorschemes: {
              scheme: 'brewer.Paired12'
            }
          }
        }
    });
  }
  catch (ex) {
    alert(ex.message);
  }
}

main();

</script>

</body>
</html>
